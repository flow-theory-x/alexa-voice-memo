# AWSリソース名変更計画書

## 概要
「voiceMEMO」から「松蔭（showIN）」へのリブランディングに伴うAWSリソース名の変更計画。

## 重要な注意事項

### ⚠️ 既存ユーザーへの影響
現在本番環境で稼働中のため、リソース名の変更は**慎重に**行う必要があります。

### 推奨アプローチ
1. **段階的移行**: 新旧両方のリソースを並行稼働させる
2. **データ移行**: 既存データの安全な移行
3. **ユーザー通知**: 移行スケジュールの事前告知

## 現在のリソース名と変更案

### 1. CDKスタック名
- **現在**: `alexa-voice-memo-{env}`
- **変更案**: `showin-alexa-memo-{env}`
- **影響**: 
  - 新しいスタックの作成が必要
  - 既存スタックからのデータ移行が必要

### 2. DynamoDBテーブル
- **現在**: `alexa-voice-memo-{env}`
- **変更案**: `showin-memo-{env}`
- **影響**:
  - データ移行スクリプトが必要
  - ダウンタイムの可能性

### 3. Lambda関数
- **現在**: 
  - `alexa-voice-memo-{env}-AlexaSkillHandler`
  - `alexa-voice-memo-{env}-WebApiHandler`
- **変更案**:
  - `showin-{env}-AlexaSkillHandler`
  - `showin-{env}-WebApiHandler`
- **影響**: Alexaスキル設定の更新が必要

### 4. S3バケット（フロントエンド）
- **現在**: `alexa-voice-memo-{env}-frontend`
- **変更案**: `showin-{env}-frontend`
- **影響**: 
  - カスタムドメインの再設定
  - CloudFrontディストリビューションの更新

### 5. API Gateway
- **現在**: `alexa-voice-memo-{env}-api`
- **変更案**: `showin-{env}-api`
- **影響**: 
  - APIエンドポイントURLの変更
  - フロントエンドの設定更新が必要

## 移行計画

### Phase 1: 準備（1週間）
1. [ ] バックアップスクリプトの作成
2. [ ] データ移行スクリプトの作成
3. [ ] 新スタックのテスト環境構築
4. [ ] 移行手順書の作成

### Phase 2: 並行稼働（2週間）
1. [ ] 新スタック（showin）のデプロイ
2. [ ] データの同期メカニズム実装
3. [ ] 新旧両方のエンドポイントを有効化
4. [ ] ユーザーへの移行通知

### Phase 3: 移行（1週間）
1. [ ] 新規ユーザーを新スタックへ誘導
2. [ ] 既存ユーザーのデータ移行
3. [ ] 動作確認とバグ修正

### Phase 4: 完了（1週間）
1. [ ] 旧スタックへのアクセス停止
2. [ ] 最終データ移行
3. [ ] 旧スタックの削除

## リスクと対策

### リスク1: データ損失
- **対策**: 
  - 完全バックアップの実施
  - 段階的な移行
  - ロールバック手順の準備

### リスク2: サービス停止
- **対策**:
  - 並行稼働期間の設定
  - 深夜メンテナンス時間の活用
  - 事前のユーザー通知

### リスク3: Alexaスキルの再認証
- **対策**:
  - Amazon開発者アカウントでの事前確認
  - スキル名の段階的変更

## 推奨事項

### 🎯 最小限の変更案
既存ユーザーへの影響を最小限にするため、以下の部分的な変更を推奨：

1. **表示名のみ変更**:
   - フロントエンドの表示名
   - Alexaスキルの表示名
   - ドキュメント類

2. **内部名は維持**:
   - AWSリソース名は`alexa-voice-memo`のまま
   - APIエンドポイントも変更なし

3. **新規ドメイン追加**:
   - `showin.example.com`を追加
   - 既存の`memo.example.com`も維持

この方法により、技術的なリスクを最小限に抑えながら、ブランド変更を実現できます。

## 決定事項記録欄

**決定日**: _______________

**決定内容**:
- [ ] 完全移行を実施
- [ ] 最小限の変更（表示名のみ）を実施
- [ ] その他: _______________

**承認者**: _______________

---

*このドキュメントは松蔭（showIN）のリブランディングに伴うAWSリソース名変更の計画書です。実施前に必ず関係者全員で検討してください。*