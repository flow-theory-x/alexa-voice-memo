# Troubleshooting Guide

## よくある問題と解決方法

### 認証関連

#### 問題: Google Sign-Inボタンが表示されない
**原因**: Google Sign-In ライブラリの読み込み失敗
**解決方法**:
1. ブラウザのコンソールでエラーを確認
2. ネットワーク接続を確認
3. ブラウザのキャッシュをクリア
4. 別のブラウザで試す

#### 問題: ログイン後すぐにログアウトされる
**原因**: JWTトークンの期限切れまたは無効
**解決方法**:
1. ブラウザの時刻設定を確認（システム時刻のずれ）
2. localStorage をクリア: `localStorage.clear()`
3. ブラウザを再起動
4. Google アカウントで再ログイン

#### 問題: 401 Unauthorized エラー
**原因**: 認証トークンの問題
**解決方法**:
1. 一度ログアウトして再ログイン
2. ブラウザの開発者ツールでトークンを確認
3. API エンドポイントが正しいか確認

### 音声入力関連

#### 問題: マイクボタンが表示されない
**原因**: ブラウザが Web Speech API に対応していない
**解決方法**:
1. 対応ブラウザを使用:
   - Chrome (推奨)
   - Edge
   - Safari (iOS 14.5+)
2. ブラウザを最新版にアップデート

#### 問題: 「マイクが使用できません」エラー
**原因**: マイクの権限が拒否されている
**解決方法**:

**iPhone/iPad**:
1. 設定 → Safari → マイク → ON
2. または: 設定 → Chrome → マイク → ON

**Android**:
1. Chrome → 設定 → サイトの設定 → マイク
2. voicememo のサイトを許可

**PC**:
1. ブラウザのアドレスバー左のアイコンをクリック
2. サイトの設定 → マイク → 許可

#### 問題: 音声が認識されない
**原因**: 音声入力の問題
**解決方法**:
1. 静かな環境で試す
2. マイクに向かってはっきり話す
3. 日本語設定を確認
4. 別のマイクを試す

### 家族機能関連

#### 問題: 招待コードが無効
**原因**: コードの有効期限切れ（5分）
**解決方法**:
1. 新しい招待コードを生成
2. すぐに相手に共有
3. 5分以内に入力してもらう

#### 問題: 家族メンバーが表示されない
**原因**: データ同期の遅延
**解決方法**:
1. 画面を下にスワイプして更新
2. ブラウザをリロード
3. 少し時間を置いてから再度確認

#### 問題: 家督を譲れない
**原因**: 権限不足または Alexa ユーザーへの譲渡
**解決方法**:
1. 自分が当主であることを確認
2. 相手が Alexa ユーザーでないことを確認
3. 家族メンバーが複数いることを確認

### 表示関連

#### 問題: メモが表示されない
**原因**: 読み込みエラーまたはネットワーク問題
**解決方法**:
1. インターネット接続を確認
2. 画面を下にスワイプして更新
3. ブラウザをリロード（F5）
4. エラーメッセージの「再読み込み」ボタンをクリック

#### 問題: 文字が小さすぎる/大きすぎる
**原因**: ブラウザのズーム設定
**解決方法**:
1. Ctrl + 0（Windows）または Cmd + 0（Mac）でリセット
2. ブラウザの設定で文字サイズを調整

#### 問題: レイアウトが崩れる
**原因**: 古いブラウザまたはキャッシュの問題
**解決方法**:
1. ブラウザを最新版にアップデート
2. Ctrl + Shift + R（強制リロード）
3. ブラウザのキャッシュをクリア

### Alexa 連携関連

#### 問題: Alexa がメモを追加できない
**原因**: スキルのリンクが切れている
**解決方法**:
1. Alexa アプリでスキルを無効化
2. 再度有効化してアカウントリンク
3. 「アレクサ、ボイスメモを開いて」で確認

#### 問題: 家族の招待コードが Alexa で使えない
**原因**: 発音の問題
**解決方法**:
1. 数字をはっきり発音
2. 「いち、に、さん、よん」と区切って話す
3. 画面で招待コードを確認しながら話す

### パフォーマンス関連

#### 問題: アプリの動作が遅い
**原因**: メモが大量にある、ネットワークが遅い
**解決方法**:
1. 削除済みメモを完全削除
2. Wi-Fi 環境で使用
3. ブラウザのタブを減らす
4. デバイスを再起動

### データ関連

#### 問題: メモが消えた
**原因**: 誤操作または同期の問題
**解決方法**:
1. 削除済みメモを確認（グレー表示）
2. 復元ボタンで復活
3. 家族が削除していないか確認

#### 問題: 編集が反映されない
**原因**: ネットワークエラー
**解決方法**:
1. ネットワーク接続を確認
2. もう一度編集を試す
3. ブラウザをリロード

## デバッグ情報の取得

### ブラウザコンソールの確認
1. F12 キーで開発者ツールを開く
2. Console タブを選択
3. エラーメッセージを確認
4. スクリーンショットを撮る

### ネットワークログの確認
1. 開発者ツールの Network タブ
2. 失敗したリクエストを確認
3. Status コードを確認
4. Response を確認

### localStorage の確認
```javascript
// コンソールで実行
console.log('Token:', localStorage.getItem('googleToken'));
console.log('UserName:', localStorage.getItem('userName'));
```

## お問い合わせ

上記で解決しない場合は、以下の情報を添えてお問い合わせください：

1. **環境情報**
   - ブラウザ名とバージョン
   - OS（Windows/Mac/iOS/Android）
   - デバイス（PC/スマホ/タブレット）

2. **エラー情報**
   - エラーメッセージ
   - 発生したタイミング
   - 再現手順

3. **スクリーンショット**
   - エラー画面
   - コンソールログ
   - ネットワークエラー

## よくある質問（FAQ）

**Q: オフラインで使えますか？**
A: 現在はオンライン専用です。将来的にオフライン対応予定です。

**Q: データはどこに保存されますか？**
A: AWS の東京リージョンに暗号化して保存されます。

**Q: 他の家族のメモを削除できますか？**
A: はい、家族メンバーは全員が全てのメモを編集・削除できます。

**Q: 退会方法は？**
A: 現在は退会機能はありません。全メモを削除してログアウトしてください。

**Q: 料金はかかりますか？**
A: 完全無料でご利用いただけます。