# Web UI Features Documentation

## 概要

Voice Memo Web UI は、Alexa スキルと連携して動作するプログレッシブウェブアプリケーション（PWA）です。
Google 認証を使用し、家族でメモを共有できる機能を提供します。

## 主要機能

### 1. Google OAuth 認証

- ワンクリックで Google アカウントによるログイン
- JWT トークンによるセッション管理
- 自動ログアウト機能（JWT 期限切れ時）

### 2. メモ管理機能

#### 基本操作

- **追加**: メニューから「メモ追加」またはマイクボタンで音声入力
- **編集**: メモを右スワイプまたは編集ボタン
- **削除**: メモを左スワイプまたは削除ボタン
- **復元**: 削除済みメモの復元ボタン
- **全文表示**: メモをダブルタップ

#### 音声入力

- Web Speech API を使用した音声認識
- 対応ブラウザ: Chrome、Edge、Safari（iOS 14.5+）
- リアルタイムで認識結果を表示

#### 表示機能

- 省略表示: 長いメモは自動的に省略（...）
- タイムスタンプ: 相対時間表示（例: 5 分前）
- 作成者表示: 家族メンバーの名前を表示
- 削除済み表示: グレーアウトと取り消し線

### 3. 家族共有機能

#### 家族管理

- **招待**: 4 桁の招待コード生成（5 分間有効）
- **参加**: 招待コードで他の家族に参加
- **独立**: 現在の家族から独立して新しい家族を作成
- **名簿**: 家族メンバー一覧の表示

#### 家督相続システム

- 各家族には 1 人の「当主」が存在
- 当主は他のメンバーに家督を譲ることが可能
- Alexa ユーザーには家督を譲れない仕様

### 4. UI/UX 機能

#### プルリフレッシュ

- 画面を下にスワイプしてメモを更新
- スムーズなアニメーション付き

#### レスポンシブデザイン

- モバイルファースト設計
- タブレット・デスクトップにも対応

#### ダークモード（未実装）

- 将来的に実装予定

### 5. アクセシビリティ

#### キーボード操作

- Tab キーでナビゲーション
- Enter キーで決定
- Esc キーでモーダル閉じる

#### スクリーンリーダー対応

- 適切な ARIA ラベル
- セマンティック HTML

## 技術仕様

### フロントエンド

- 純粋な JavaScript（フレームワークなし）
- CSS3 アニメーション
- Progressive Enhancement

### セキュリティ

- HTTPS のみ対応
- XSS 対策: textContent 使用
- CORS 設定

### パフォーマンス

- 遅延読み込み
- 最小限の DOM 操作
- デバウンス処理

## ブラウザ要件

### 必須要件

- JavaScript 有効
- Cookies 有効
- LocalStorage 対応

### 推奨ブラウザ

- Chrome 90+
- Safari 14.5+
- Edge 90+
- Firefox 88+

### 音声入力対応

- Chrome（全 OS）
- Edge（全 OS）
- Safari（iOS 14.5+、macOS 11+）

## 画面構成

### ヘッダー

- アプリ名: voiceMEMO
- 家族アイコン: 現在のユーザーアイコンと家族人数
- メニューボタン: ハンバーガーメニュー

### メインエリア

- メモリスト: 時系列で表示
- 空状態: メモがない場合の案内
- ローディング: 読み込み中表示
- エラー: エラー時の再読み込みボタン

### フローティングボタン

- マイクボタン: 右下に固定表示

### モーダル

- ヘルプ: 使い方説明
- 招待コード: 家族招待用
- 参加: 招待コード入力
- 家族名簿: メンバー一覧
- 音声入力: 録音中表示
- 全文表示: メモの詳細表示

## バージョン管理

### バージョン表記

- 形式: `build:YYMMDDHHSS`
- 例: `build:2507141516`（2025 年 7 月 14 日 15 時 16 分）
- 表示場所: メニュー最下部

### 更新履歴

- v1.0: 初期リリース
- v1.1: 家族共有機能追加
- v1.2: 音声入力機能追加
- v1.3: JWT 自動ログアウト追加
- v1.4: 全文表示機能追加

## 今後の実装予定

1. **オフライン対応**

   - Service Worker 実装
   - オフライン時のメモ同期

2. **通知機能**

   - 家族がメモを追加した時の通知
   - Web Push Notifications

3. **検索機能**

   - メモ内容の全文検索
   - 作成者でのフィルタリング

4. **エクスポート機能**

   - CSV/JSON エクスポート
   - 印刷対応

5. **多言語対応**
   - 英語版の追加
   - 言語自動検出
